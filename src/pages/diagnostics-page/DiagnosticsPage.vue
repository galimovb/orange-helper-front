<script setup>
import { ref, watchEffect } from "vue";
import Header from "@/components/Header.vue";
import InfoCard from "@/components/InfoCard.vue";
import Button from "@/components/Button.vue";
import Footer from "@/components/Footer.vue";
import PopUp from "@/components/PopUp.vue";

const cards = [
  {
    title: "Когда режим дня — не мелочь.",
    text: "Как нарушение режима дня влияет на школьные трудности",
    description: "Рассматривается реальный пример первоклассника Дениса, который учится в престижной школе и ежедневно проводит в дороге более двух часов. Из-за этого он хронически недосыпает, у него нет полноценного завтрака, отсутствует утренняя зарядка и отдых после школы. Его день перегружен дополнительными занятиями, а домашнее задание он делает уже поздно вечером в состоянии утомления. Это приводит к истерикам, агрессии, бессоннице и сниженной учебной мотивации. Анализ показал: режим Дениса не соответствует возрастным нормам, в нем отсутствует необходимый баланс между учебой, отдыхом, сном и физической активностью. Даже при отличных школьных условиях такая нагрузка провоцирует психологические и физиологические срывы. История подчеркивает, насколько важно соблюдать режим дня для младших школьников и насколько разрушительными могут быть последствия его игнорирования."
  },
  {
    title: "Ребенок не устает? Или уже на пределе?",
    text: "О перегрузке, скрытых признаках стресса и ошибках взрослых",
    description: "Игорь — одарённый ребенок с высоким уровнем развития и богатым словарным запасом, но с серьёзными школьными трудностями. Учителя и психологи отмечают его невнимательность, моторную неловкость, проблемы с почерком и концентрацией. Родители уверены, что он просто «не старается», не замечая признаков хронического перенапряжения: перевозбуждение по вечерам, беспокойный сон, слезы и вспышки агрессии. История Игоря показывает, как чрезмерная нагрузка (музыка, английский, отсутствие прогулок и полноценного отдыха) приводит к неврозоподобным состояниям. Только после глубокой диагностики и совместной работы с семьей была составлена новая система — сбалансированный режим дня, снижение нагрузки, регулярные прогулки и вечерняя ритуализация. В результате — улучшение эмоционального состояния, нормализация сна и устойчивый прогресс в учёбе."
  },
  {
    title: "Правда о режиме: что на самом деле делают дети после школы",
    text: "Что показывает анализ анкет родителей и почему выводы пугают",
    description: "Анкетирование родителей учащихся начальных классов выявило тревожные факты. Большинство детей не соблюдают режим дня: поздно ложатся, слишком долго делают домашние задания, практически не гуляют, и проводят от 1 до 1,5 часов за компьютером. Многие учителя были уверены, что ученики тратят на домашние задания минимум времени, но анализ анкет показал обратное — родители массово контролируют процесс выполнения заданий, вмешиваются, создавая напряжённую эмоциональную атмосферу. Такие данные позволили учителям по-новому взглянуть на проблемы учащихся: неуспеваемость, усталость, снижение мотивации. Анкетирование стало инструментом не только диагностики, но и выстраивания диалога с родителями — ведь только совместно можно выстроить грамотный и щадящий учебный процесс."
  },
  {
    title: "Трудности обучения: ищем корень",
    text: "Как нарушения режима провоцируют неврозы и неуспеваемость",
    description: "М.М. Безруких в своей книге подчёркивает: многие школьные трудности не связаны с уровнем интеллекта или мотивацией ребёнка, а являются результатом систематических нарушений режима дня. Недосып, отсутствие прогулок, перегрузка факультативами и поздняя работа над домашними заданиями приводят к нервному истощению, агрессии и нарушению концентрации. Эти нарушения создают предпосылки к невротическим расстройствам: дети становятся раздражительными, у них ухудшается память, внимание, появляется апатия или гиперактивность. Исследования показывают: первым и обязательным шагом в коррекции учебных трудностей должно быть восстановление правильного режима дня. И только затем — подбор дополнительных методов педагогической помощи."
  }
];

const psychologyCards = [
  {
    title: "Что формирует наши чувства и поведение с детства.",
    description:
      "Три внутренних ребенка. Когда в нас пробуждается одна из трех внутренних Детей, наше восприятие и поведение кажутся такими же незрелыми. Мы интенсивно проживаем чувства, которые нельзя полностью объяснить текущей ситуацией. Обстоятельства напоминают нам сцены из детства и юности, в которых наши базовые потребности проигнорировали. Различают Печального, Капризного и Счастливого Ребенка"
  },
  {
    title: "Печальный Ребенок, Капризный Ребенок, Счастливый Ребенок",
    description: `
      <strong>Печальный Ребенок</strong>: Этот внутренний ребенок чувствует стыд, одиночество и беспомощность. Он возникает, когда сталкиваемся с отказом, чувствуем себя покинутыми или беспомощными. Работа с Печальным Ребенком включает принятие своих эмоций, понимание их причин и заботу о себе в моменты уязвимости.<br><br>

      <strong>Капризный Ребенок</strong>: Это ребенок, который проявляет ярость, злость и упрямство, когда его потребности не удовлетворены. Он появляется в моменты, когда испытываем критику или отвержение. Чтобы поддержать Капризного Ребенка, важно научиться распознавать его потребности за эмоциональными вспышками и осознавать, что необходимо для восстановления внутреннего баланса.<br><br>

      <strong>Счастливый Ребенок</strong>: Этот ребенок внутри нас испытывает радость, легкость и уверенность в себе. Он появляется, когда мы чувствуем поддержку, любовь и безопасность. Счастливый Ребенок помогает нам быть открытыми к новым возможностям и радоваться жизни. Его поддержка заключается в умении наслаждаться простыми моментами и ценить собственное благополучие.
    `
  },
  {
    title: "Требующий и Карающий Судья.",
    description: "Воплощают разрушающие голоса из нашего детства и юности. Они транслируют исключительно негативные послания. Из-за них мы чувствуем, что мы никогда не дотягиваем до нужного уровня, не стоим любви, что мы скучны, глупы, безобразны и некомпетенты."
  },
  {
    title: "Как мы преодолеваем нечто тяжелое по-детски.",
    description: "Для того чтобы справиться с эмоциональной нагрузкой и тяжелыми ситуациями, в детстве для самозащиты мы усваивали определенные виды поведения, которые позже закрепились. Эти стратегии включают подчинение, избегание и гиперкомпенсацию."
  }
];


const cardsWithImage = [
  {
    title: "Опросник «Отношение педагога к родителям»",
    image: "/src/assets/img/infoCard_1.svg"
  },
  {
    title: "Опросник «Отношение педагога к детям»",
    image: "/src/assets/img/infoCard_2.svg"
  },
  {
    title: "«Учебная мотивация школьников»",
    image: "/src/assets/img/infoCard_3.svg"
  },
  {
    title: "«Уровень тревожности ребёнка»",
    image: "/src/assets/img/infoCard_4.svg"
  },
  {
    title: "«Родительское выгорание»",
    image: "/src/assets/img/infoCard_5.svg"
  },
  {
    title: "Диагностика детских страхов (по возрасту)",
    image: "/src/assets/img/infoCard_6.svg"
  }
];

const isPopupVisible = ref(false);
const selectedCard = ref(null);

const openPopup = (card) => {
  selectedCard.value = card;
  isPopupVisible.value = true;
};

const closePopup = () => {
  isPopupVisible.value = false;
  selectedCard.value = null;
};

watchEffect(() => {
  if (isPopupVisible.value) {
    document.body.style.overflow = "hidden";
  } else {
    document.body.style.overflow = "";
  }
});
</script>

<template>
  <Header />
  <section class="diagnostics px-[55px] py-8">
    <div class="flex lg:flex-row flex-col gap-6 items-center">
      <div class="flex flex-col lg:gap-16 gap-6">
        <h1 class="text-orange-500 text-[55px] leading-[100%]">
          Диагностика как первый шаг к осознанному родительству
        </h1>
        <p class="text-4xl leading-[100%]">
          Здесь вы найдёте проверенные материалы по педагогике и психологии, а также простые и доступные тесты. Они
          помогут вам лучше понять себя, ребёнка и особенности ваших взаимоотношений. Все материалы отобраны
          специалистами
          и подходят для самостоятельного использования родителями, педагогами и психологами.
        </p>
      </div>
      <img
        src="@/assets/img/diagnostics.svg"
        alt="diagnostics"
      >
    </div>
  </section>
  <div class="content-rectangle h-[60px] bg-orange-500 mb-[50px]" />
  <section class="pedagogy px-[55px] py-8">
    <div class="flex flex-col gap-[50px]">
      <div class="flex flex-col items-center text-center gap-6 ">
        <h2 class="text-orange-500 text-[55px] leading-[100%]">
          Поговорим о педагогике
        </h2>
        <p class="text-4xl leading-[100%]">
          Вы узнаете, как эффективно выстраивать образовательную траекторию ребёнка, развивать интерес к обучению и
          выстраивать уважительное взаимодействие.
        </p>
      </div>
      <div class="flex lg:flex-row flex-col-reverse items-center justify-center gap-[50px] ">
        <img
          src="@/assets/img/pedagogy.svg"
          alt="pedagogy"
        >
        <div class="grid grid-cols-2 gap-[41px] lg:max-w-[535px]">
          <InfoCard
            v-for="(card, key) in cards"
            :key="key"
            :title="card.title"
            :text="card.text"
            @click="openPopup(card)"
            class="p-3 lg:h-full text-center cursor-pointer"
          />
        </div>
      </div>
    </div>
  </section>
  <section class="about-psychology bg-orange-500 flex flex-col gap-8 px-[55px] py-8">
    <div class="flex flex-col gap-6">
      <h3 class="text-white text-[55px] leading-[100%]">
        Поговорим о психологии
      </h3>
      <p class="text-4xl leading-[100%]">
        Фрагменты из книг и психологических обзоров помогут лучше понять поведение, эмоции и потребности ребёнка в
        разные возрастные периоды.
      </p>
    </div>
    <div class="flex flex-col gap-8">
      <div
        v-for="(card, key) in psychologyCards"
        :key="key"
        :title="card.title"
        @click="openPopup(card)"
        class="bg-white lg:text-2xl text-4xl text-left rounded-[5px] px-[30px] py-[18px] cursor-pointer"
      >
        <p>
          {{ card.title }}
        </p>
      </div>
    </div>
  </section>
  <section class="psychological-testing px-[55px] py-8">
    <div class="flex flex-col gap-4 mb-[40px]">
      <h4 class="text-orange-500 text-[55px] leading-[100%]">
        Педагогическое и психологическое тестирования
      </h4>
      <p class="text-4xl leading-[100%]">
        Этот раздел содержит опросники и тесты, которые помогут оценить уровень развития и готовности ребёнка к
        обучению, выявить его сильные и уязвимые стороны в образовательной сфере, а также понять эмоциональное состояние
        ребенка.
      </p>
    </div>
    <div class="grid lg:grid-cols-3 grid-cols-2 gap-[30px] px-[72px]">
      <router-link
        v-for="(card, key) in cardsWithImage"
        :key="key"
        :to="`/test/${key+1}`"
        class="cursor-pointer"
      >
        <InfoCard
          :title="card.title"
          :image="card.image"
          :titleSize="`text-4xl`"
          class="px-3 py-[26px] text-white text-center text-4xl"
        />
      </router-link>
    </div>
  </section>
  <section class="results bg-orange-500 px-[55px] py-12 mb-8">
    <div class="flex flex-col lg:gap-6 gap-12 lg:items-start">
      <h3 class="text-[55px] leading-[100%]">
        Как интерпретировать результаты?
      </h3>
      <p class="text-white text-4xl leading-[100%]">
        Если вы получили результат, вызывающий беспокойство — не делайте поспешных выводов. Вы можете обратиться за
        профессиональной консультацией, и наши специалисты помогут вам разобраться, поддержать и предложить дальнейшие
        шаги.
      </p>
      <Button
        label="Записаться на консультацию"
        color="white"
        size="large"
      />
    </div>
  </section>
  <PopUp
    :isVisible="isPopupVisible"
    :card="selectedCard"
    @close="closePopup"
  />
  <Footer />
</template>